<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Sistema de Sa√≠da de Blocos</title>
<style>
body { font-family: Arial; background:#f2f2f2; padding:20px }
h2 { margin-top:30px }
input, select, button { padding:6px; margin:4px }
table { border-collapse: collapse; width:100%; margin-top:10px; background:white }
th, td { border:1px solid #ccc; padding:6px; text-align:center }
button { cursor:pointer }
</style>
</head>
<body>

<h1>üèóÔ∏è Sistema de Sa√≠da de Blocos</h1>

<h2>üì¶ Cadastro de Dep√≥sitos</h2>
<input id="nomeDeposito" placeholder="Nome do dep√≥sito">
<input id="enderecoDeposito" placeholder="Endere√ßo">
<input id="precoDeposito" type="number" step="0.01" placeholder="Pre√ßo por bloco">
<button onclick="addDeposito()">Cadastrar</button>

<table id="tabelaDepositos">
<tr><th>Nome</th><th>Endere√ßo</th><th>Pre√ßo</th></tr>
</table>

<h2>üßæ Registrar Sa√≠da</h2>
<select id="selectDeposito"></select>
<input id="quantidade" type="number" placeholder="Quantidade">
<select id="status">
<option>Pendente</option>
<option>Pago</option>
</select>
<button onclick="addSaida()">Registrar</button>

<table id="tabelaSaidas">
<tr><th>Data</th><th>Dep√≥sito</th><th>Qtd</th><th>Pre√ßo</th><th>Total</th><th>Status</th></tr>
</table>

<h2>üìä Relat√≥rio Mensal</h2>
<p id="relatorio"></p>

<script>
let depositos = JSON.parse(localStorage.getItem("depositos")) || [];
let saidas = JSON.parse(localStorage.getItem("saidas")) || [];

function salvar() {
  localStorage.setItem("depositos", JSON.stringify(depositos));
  localStorage.setItem("saidas", JSON.stringify(saidas));
}

function addDeposito() {
  let nome = nomeDeposito.value;
  let endereco = enderecoDeposito.value;
  let preco = parseFloat(precoDeposito.value);
  depositos.push({nome,endereco,preco});
  salvar();
  atualizarTudo();
}

function addSaida() {
  let dep = selectDeposito.value;
  let qtd = parseInt(quantidade.value);
  let statusPagamento = status.value;
  let deposito = depositos.find(d=>d.nome==dep);
  let total = qtd * deposito.preco;
  let data = new Date().toLocaleDateString();
  saidas.push({data,dep,qtd,preco:deposito.preco,total,status:statusPagamento});
  salvar();
  atualizarTudo();
}

function atualizarTudo() {
  tabelaDepositos.innerHTML="<tr><th>Nome</th><th>Endere√ßo</th><th>Pre√ßo</th></tr>";
  depositos.forEach(d=>{
    tabelaDepositos.innerHTML+=`<tr><td>${d.nome}</td><td>${d.endereco}</td><td>${d.preco.toFixed(2)}</td></tr>`;
  });

  selectDeposito.innerHTML="";
  depositos.forEach(d=>{
    selectDeposito.innerHTML+=`<option>${d.nome}</option>`;
  });

  tabelaSaidas.innerHTML="<tr><th>Data</th><th>Dep√≥sito</th><th>Qtd</th><th>Pre√ßo</th><th>Total</th><th>Status</th></tr>";
  saidas.forEach(s=>{
    tabelaSaidas.innerHTML+=`<tr>
    <td>${s.data}</td><td>${s.dep}</td><td>${s.qtd}</td>
    <td>${s.preco.toFixed(2)}</td><td>${s.total.toFixed(2)}</td><td>${s.status}</td>
    </tr>`;
  });

  let totalPago = saidas.filter(s=>s.status=="Pago").reduce((a,b)=>a+b.total,0);
  let totalPendente = saidas.filter(s=>s.status=="Pendente").reduce((a,b)=>a+b.total,0);

  relatorio.innerHTML = `
  üí∞ Total Pago: R$ ${totalPago.toFixed(2)}<br>
  ‚è≥ Total Pendente: R$ ${totalPendente.toFixed(2)}
  `;
}

atualizarTudo();
</script>

</body>
</html>